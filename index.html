<!DOCTYPE html>
<html>
<head>
  <title>Video Player</title>
  <style>
    video {
      width: 1280px;
      height: 1024px;
      display: block;
      margin: 0 auto;
    }
    .hidden {
      display: none;
    }
    .transition {
      position: absolute;
      top: 0;
      left: 0;
      width: 1280px;
      height: 1024px;
      background-color: #000;
      display: flex;
      justify-content: center;
      align-items: center;
    }
  </style>
</head>
<body>
  <video id="video" loop>
    <source src="snoring.mp4" type="video/mp4">
    Your browser does not support the video tag.
  </video>

  <script>
    // Get the video element
    let video = document.getElementById('video');

    // Add an event listener to the video to handle errors
    video.addEventListener('error', (e) => {
      console.error('Error playing video:', e);
    });

    // Add an event listener to the video to handle the play event
    video.addEventListener('play', () => {
      console.log('Video started playing');
    });

    // Add an event listener to the video to handle the pause event
    video.addEventListener('pause', () => {
      console.log('Video paused');
    });

    // Define an index of videos
    const videos = [
      { src: '1.mp4', type: 'video/mp4' },
      { src: '2.mp4', type: 'video/mp4' },
      { src: '3.mp4', type: 'video/mp4' },
      { src: '4.mp4', type: 'video/mp4' },
      { src: '5.mp4', type: 'video/mp4' },
      // Add more videos to the index as needed
    ];

    // Define a transition video or GIF
    const transition = {
      src: 'snow.gif',
      type: 'image/gif'
    };

    // Add an event listener to the document to listen for the space bar key press
    document.addEventListener('keydown', (e) => {
      // Check if the space bar was pressed
      if (e.key === ' ') {
        // Pause the current video
        video.pause();

        // Remove the old video element
        video.remove();

        // Create a transition element
        const transitionElement = document.createElement('img');
        transitionElement.className = 'transition';
        transitionElement.src = transition.src;
        document.body.appendChild(transitionElement);

        // Wait for 2 seconds before removing the transition element
        setTimeout(() => {
          transitionElement.remove();

          // Create a new video element
          video = document.createElement('video');
          video.style.width = '1280px';
          video.style.height = '1024px';
          video.style.display = 'block';
          video.style.margin = '0 auto';
          video.loop = true;

          // Get a random video from the index
          const randomVideoIndex = Math.floor(Math.random() * videos.length);
          const randomVideo = videos[randomVideoIndex];

          // Add a source to the new video element
          const newSource = document.createElement('source');
          newSource.src = randomVideo.src;
          newSource.type = randomVideo.type;
          video.appendChild(newSource);

          // Add the new video element to the page
          document.body.appendChild(video);

          // Add an event listener to the video to get its duration
          video.addEventListener('loadedmetadata', () => {
            // Get the duration of the video
            const duration = video.duration * 1000;

            // Wait for the duration of the video before redirecting to the new page
            setTimeout(() => {
              // Redirect to a different page
              window.location.href = 'qrcode.html';
            }, duration);
          });
        }, 2000);
      }
    });

    // Load the video when the page loads
    document.addEventListener('DOMContentLoaded', () => {
      video.load();
      video.play();
    });
  </script>
</body>
</html>
